# 项目开发规则

## 语言规范

### 规则 1：中文优先
- **所有回复必须使用中文**
- **所有文档必须使用中文编写**，包括但不限于：
  - 需求文档（requirements.md）
  - 设计文档（design.md）
  - 任务列表（tasks.md）
  - README 文件
  - 代码注释
  - API 文档
  - 用户手册

## 日志记录规范

### 规则 2：完善的日志记录
所有模块必须实现完善的日志记录功能：

- **日志级别**：使用标准日志级别（DEBUG、INFO、WARN、ERROR）
- **日志内容**：记录关键操作、错误信息、性能指标
- **日志格式**：包含时间戳、日志级别、模块名称、消息内容
- **日志输出**：支持控制台输出和文件输出
- **敏感信息**：不得在日志中记录密码、密钥等敏感信息

**实施要求**：
- 每个模块/类都应该有独立的日志记录器
- 在关键业务逻辑的入口和出口处添加日志
- 异常处理时必须记录详细的错误信息和堆栈跟踪
- 重要的状态变更必须记录日志

## 测试规范

### 规则 3：使用 Playwright 进行前端和集成测试

- **前端测试**：使用 Playwright 框架进行 UI 测试
- **集成测试**：使用 Playwright 框架进行端到端测试
- **测试覆盖**：确保关键用户流程都有对应的测试用例

**Playwright 测试要求**：
- 测试文件命名：`*.spec.ts` 或 `*.test.ts`
- 使用 Page Object Model 模式组织测试代码
- 测试应该独立且可重复执行
- 使用有意义的测试描述
- 适当使用等待和断言确保测试稳定性

### 规则 4：集成测试执行流程

**顺序执行与错误处理**：
- **按用例顺序执行**：集成测试必须按照预定义的用例顺序依次执行
- **快速失败机制**：一旦某个用例执行失败，立即停止后续测试
- **进入修正流程**：测试失败后，必须：
  1. 分析失败原因并记录详细日志
  2. 修正代码或测试用例
  3. 重新运行失败的用例进行验证
  4. 确认修正通过后，才能继续执行下一个用例
- **验证通过标准**：只有当前用例完全通过（所有断言成功），才能进入下一个用例

**实施要求**：
- 测试用例应该有明确的执行顺序编号
- 每个用例执行前记录开始日志，执行后记录结果
- 失败时输出清晰的错误信息和失败位置
- 修正后必须从失败的用例重新开始执行
- 不允许跳过失败的用例继续执行后续测试

---

**注意**：这些规则适用于整个项目的开发过程，所有代码、文档和测试都必须遵循以上规范。
