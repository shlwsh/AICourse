# ============================================================================
# Cargo 构建配置
# ============================================================================
# 本文件配置 Cargo 的构建行为，包括编译器选项、链接器设置等
# ============================================================================

# ----------------------------------------------------------------------------
# 构建配置
# ----------------------------------------------------------------------------
[build]
# 并行编译任务数（默认为 CPU 核心数）
# jobs = 4

# 增量编译（开发时加速，默认启用）
incremental = true

# ----------------------------------------------------------------------------
# 目标平台配置
# ----------------------------------------------------------------------------

# Windows 平台优化
[target.x86_64-pc-windows-msvc]
# 使用 LLD 链接器加速链接（需要安装 LLVM）
# rustflags = ["-C", "link-arg=-fuse-ld=lld"]

# macOS 平台优化
[target.x86_64-apple-darwin]
# 使用系统链接器
# rustflags = ["-C", "link-arg=-fuse-ld=ld64"]

# Linux 平台优化
[target.x86_64-unknown-linux-gnu]
# 使用 mold 链接器加速链接（需要安装 mold）
# rustflags = ["-C", "link-arg=-fuse-ld=mold"]

# ----------------------------------------------------------------------------
# 编译器标志
# ----------------------------------------------------------------------------
[target.'cfg(all())']
# 通用编译器标志
rustflags = [
    # 启用更多的编译器优化
    "-C", "target-cpu=native",
    # 减少二进制体积
    "-C", "embed-bitcode=no",
]

# ----------------------------------------------------------------------------
# 注册表配置
# ----------------------------------------------------------------------------
[source.crates-io]
# 使用国内镜像加速依赖下载（可选）
# replace-with = "ustc"

# [source.ustc]
# registry = "https://mirrors.ustc.edu.cn/crates.io-index"

# [source.tuna]
# registry = "https://mirrors.tuna.tsinghua.edu.cn/git/crates.io-index.git"

# ----------------------------------------------------------------------------
# 网络配置
# ----------------------------------------------------------------------------
[net]
# Git 获取并行数
git-fetch-with-cli = false
# 重试次数
retry = 3

# ----------------------------------------------------------------------------
# 术语配置
# ----------------------------------------------------------------------------
[term]
# 彩色输出
color = "auto"
# 进度条
progress.when = "auto"
